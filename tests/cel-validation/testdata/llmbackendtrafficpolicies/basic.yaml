apiVersion: aigateway.envoyproxy.io/v1alpha1
kind: LLMBackendTrafficPolicy
metadata:
  name: dog-backend-traffic-policy
  namespace: default
spec:
  backendRef:
    name: dog
  rateLimit:
    rules:
      - headers:
          - name: x-ai-gateway-llm-model-name
            type: Exact
            value: gpt-4o-mini
          - name: x-user-id
            type: Distinct
        limits:
          - type: Request
            quantity: 10
            unit: Minute
          - type: Token
            quantity: 500
            unit: Minute
      - headers:
          - name: x-ai-gateway-llm-model-name
            type: Exact
            value: llama-3-8b
        limits:
          - quantity: 500
            unit: Hour
      - headers:
          - name: x-ai-gateway-llm-model-name
            type: Exact
            value: llama-3-70b
        limits:
          - quantity: 500
